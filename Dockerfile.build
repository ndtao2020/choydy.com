# --------------> The build image
FROM quay.io/quarkus/ubi-quarkus-mandrel:21.3.0.0-Final-java11 as builder
# copy
WORKDIR /app
# copy
COPY ./.mvn ./.mvn
COPY ./src ./src
COPY ./webapp ./webapp
COPY ./mvnw ./mvnw
COPY ./pom.xml ./pom.xml
# build
USER root
RUN chmod +x mvnw && ./mvnw package -Pnative && rm -rf ./src && rm -rf ./webapp && rm -f ./pom.xml
